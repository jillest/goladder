<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Scheduling round {{round.id}} on {{round.date}}</title>
<script>
'use strict';
function setAllCheckboxes(form, state) {
	var elems = form.querySelectorAll('input[type="checkbox"]');
	for (var i = 0; i < elems.length; i++)
		elems[i].checked = state;
	verifyEven(form);
}

function verifyEven(form) {
	var n = 0;
	var elems = form.querySelectorAll('input[type="checkbox"]');
	for (var i = 0; i < elems.length; i++)
		if (elems[i].checked)
			n++;
	var submit = form.querySelector('input[type="submit"]');
	submit.disabled = n == 0 || (n & 1) != 0;
}

window.addEventListener('load', function() {
	verifyEven(document.getElementById('pairform'));
}, false);
</script>
</head>

<body>
<h1>Scheduling round {{round.id}} on {{round.date}}</h1>
<form id="pairform" action="/schedule/{{round.id}}/run" method="POST">
<table border="1">
<tr><th>Player<th>Pair
{% for presence in presences %}
{% if presence.schedule %}
<tr>
<td><label for="p{{presence.player_id}}">{{presence.name}}</label>
<td><input type="checkbox" name="p{{presence.player_id}}" id="p{{presence.player_id}}" checked onclick="verifyEven(this.form)">
{% endif %}
{% endfor %}
</table>
<input type="button" value="Select all" onclick="setAllCheckboxes(this.form, true)">
<input type="button" value="Deselect all" onclick="setAllCheckboxes(this.form, false)">
<br>
<input type="submit" value="Pair">
</form>
</body>
</html>

